---
import { getEntry } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import Hero from '../components/astro/Hero.astro'
import ProjectGrid from '../components/svelte/ProjectGrid.svelte'
import Experience from '../components/svelte/Experience.svelte'
import Services from '../components/svelte/ServiceScope.svelte'
import CTA from '../components/svelte/CTA.svelte'

const projectEntry = await getEntry('projects', 'home');
const projects = projectEntry ? projectEntry.data.featured : [];

const expEntry = await getEntry('experience', 'home');
const expData = expEntry ? expEntry.data : null;

const ctaEntry = await getEntry('cta', 'home');
const ctaData = ctaEntry ? ctaEntry.data : null;
const servicesData = await getEntry('services', 'home')
const servicesList = servicesData ? servicesData.data.services : [];
---

<Layout title="Home | My Portfolio">
  <Hero />

  <ProjectGrid projects={projects} client:visible />

  <Experience data={expData} client:visible />
  
  <Services services={servicesList} client:visible />

  <CTA data={ctaData} client:visible /> 
</Layout>